<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{/front-end/included-head}"></head>

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Blog List - Online Courses & Education Bootstrap5 Template</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.png">
    
    <style>
.blog-row {
	display: flex;
	width: 70%;
	margin: 0 auto;
	justify-content: space-between;
}

.blog-category {
	width: 45%;
}

.blog-add {
	width: 45%;
}

.blog-small-container {
	width: 70%;
	margin: 0 auto;
}

.rbt-page-banner-wrapper input {
	background: white;
	width: 100%;
}

.rbt-page-banner-wrapper textarea {
	background: white;
}

.blog-small-container .blog-add {
	width: 100%;
}

.rbt-banner-content-inner-container p {
	margin: 0;
}

input {
	max-width: none;
}

.custom-file-upload input[type="file"] {
    display: none;
}

.custom-file-upload label {
    background-color: white;
    color: black;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
}

.custom-file-upload label:hover {
    background-color: #0056b3;
}

</style>

</head>



<body class="rbt-header-sticky">
<!-- <header th:insert="~{/front-end/included-header}"></header> -->
<header th:insert="~{/front-end/header}"></header>

<div class="rbt-page-banner-wrapper">
    <!-- Start Banner BG Image  -->
    <div class="rbt-banner-image"></div>
    <!-- End Banner BG Image  -->
    <div class="rbt-banner-content">
        <br>
        <div class="rbt-banner-content-inner-container">
            <form th:action="@{insert}" method="post" th:object="${ForumPostVO}" enctype="multipart/form-data">
            	
            	<div class="blog-row">
	            	<div class="blog-category">
						<p>文章分類</p>
		                <select name="fpCategory" id="fpCategory">
		                    <option value="重量訓練">重量訓練</option>
		                    <option value="皮拉提斯">皮拉提斯</option>
		                    <option value="有氧訓練">有氧訓練</option>
		                    <option value="徒手健身">徒手健身</option>
		                    <option value="飲食分享">飲食分享</option>
		                </select>
	                </div>
	                
	                
<!-- 	                <div class="blog-add"> -->
<!-- 	                    <p>用戶ID</p> -->
<!-- 	                    <select th:field="*{userVO.uId}"> -->
<!-- 	            <option th:each="userVO : ${userListData}" th:value="${userVO.uId}" th:text="${userVO.uNickname}" /> -->
<!-- 	            </select> -->
<!-- 	                </div> -->
                
                </div>
				
				<div class="blog-small-container">
                <div class="blog-add">
                    <p>文章標題</p>
                    <input type="text" th:field="*{fpTitle}">
                    <span id="titleError" style="color: red;"></span>
                </div>

                <div class="blog-add">
                    <p>文章內容</p>
                    <textarea name="fpContent" id="fpContent" cols="30" rows="10" th:field="*{fpContent}"></textarea>
                    <span id="contentError" style="color: red;"></span>
                </div>
                
				<div class="custom-file-upload">
    <label for="file-upload">選擇圖片</label>
    <input id="file-upload" type="file" name="fpPic" />
</div>
    <div id="image-preview"></div>


                <button type="submit">儲存</button>
                <button type="button" onclick="window.history.back();">取消</button>
                
                </div>
            </form>
        </div>
        <br>
    </div>
</div>
    <!-- End Card Style -->

    <div class="rbt-separator-mid">
        <div class="container">
            <hr class="rbt-separator m-0">
        </div>
    </div>
	<footer th:replace="front-end/footer.html"></footer>

    <div class="rbt-progress-parent">
        <svg class="rbt-back-circle svg-inner" width="100%" height="100%" viewBox="-1 -1 102 102">
            <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
        </svg>
    </div>

    <!-- JS
============================================ -->
    <!-- Modernizer JS -->
    <script src="assets/js/vendor/modernizr.min.js"></script>
    <!-- jQuery JS -->
    <script src="assets/js/vendor/jquery.js"></script>
    <!-- Bootstrap JS -->
    <script src="assets/js/vendor/bootstrap.min.js"></script>
    <!-- sal.js -->
    <script src="assets/js/vendor/sal.js"></script>
    <script src="assets/js/vendor/swiper.js"></script>
    <script src="assets/js/vendor/magnify.min.js"></script>
    <script src="assets/js/vendor/jquery-appear.js"></script>
    <script src="assets/js/vendor/odometer.js"></script>
    <script src="assets/js/vendor/backtotop.js"></script>
    <script src="assets/js/vendor/isotop.js"></script>
    <script src="assets/js/vendor/imageloaded.js"></script>

    <script src="assets/js/vendor/wow.js"></script>
    <script src="assets/js/vendor/waypoint.min.js"></script>
    <script src="assets/js/vendor/easypie.js"></script>
    <script src="assets/js/vendor/text-type.js"></script>
    <script src="assets/js/vendor/jquery-one-page-nav.js"></script>
    <script src="assets/js/vendor/bootstrap-select.min.js"></script>
    <script src="assets/js/vendor/jquery-ui.js"></script>
    <script src="assets/js/vendor/magnify-popup.min.js"></script>
    <script src="assets/js/vendor/paralax-scroll.js"></script>
    <script src="assets/js/vendor/paralax.min.js"></script>
    <script src="assets/js/vendor/countdown.js"></script>
    <script src="assets/js/vendor/plyr.js"></script>
    <!-- Main JS -->
    <script src="assets/js/main.js"></script>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>

$(document).ready(function() {
    $('form').submit(function(event) {
        var title = $('#fpTitle').val().trim();
        var content = $('#fpContent').val().trim();
        var titleError = $('#titleError');
        var contentError = $('#contentError');
        var isValid = true;

        if (title === '') {
            titleError.text('文章標題不能為空');
            isValid = false;
        } else {
            titleError.text('');
        }

        if (content === '') {
            contentError.text('文章內容不能為空');
            isValid = false;
        } else {
            contentError.text('');
        }

        if (!isValid) {
            event.preventDefault(); // 阻止表单提交
            alert('請填寫完整的文章標題和內容！'); // 提示用户有错误发生
            setTimeout(resetForm, 0); // 立即重置表单
        }
    });

    function resetForm() {
        $('#fpTitle').val(''); // 清空标题输入框
        $('#fpContent').val(''); // 清空内容输入框
        $('#titleError').text(''); // 清空标题错误提示
        $('#contentError').text(''); // 清空内容错误提示
    }
});


var fileUploadInput = document.getElementById('file-upload');
var imagePreview = document.getElementById('image-preview');

fileUploadInput.addEventListener('click', function() {
    // 清空预览区域的内容
    imagePreview.innerHTML = '';
});

fileUploadInput.addEventListener('change', function(event) {
    var file = event.target.files[0];
    
    // 检查是否选择了文件
    if (file) {
        var reader = new FileReader();
        
        reader.onload = function(e) {
            var imgElement = document.createElement('img');
            
            imgElement.src = e.target.result;
            
            // 先清空预览区域的内容
            imagePreview.innerHTML = ''; 
            imagePreview.appendChild(imgElement);
        };
        
        reader.readAsDataURL(file);
    }
});

// 当用户点击上传按钮时触发文件选择对话框
document.getElementById('upload-button').addEventListener('click', function() {
    fileUploadInput.click();
});

</script>

</html>